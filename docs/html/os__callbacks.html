<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <!--BEGIN PROJECT_NAME--><title>: Operating System Callbacks</title><!--END PROJECT_NAME-->
    <!--BEGIN !PROJECT_NAME--><title>Operating System Callbacks</title><!--END !PROJECT_NAME-->
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
    <link href="customdoxygen.css" rel="stylesheet" type="text/css" />
    $treeview
    $search
    $mathjax
    <script type="text/javascript" src="utils.js"></script>
  </head>
<body onload="navlink()">
<div id="top"><!-- do not remove this div! -->

<!--BEGIN TITLEAREA-->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <!--BEGIN PROJECT_LOGO-->
  <td id="projectlogo"><a href="index.html"><img alt="Logo" src="$projectlogo"/></a></td>
  <!--END PROJECT_LOGO-->
  <!--BEGIN PROJECT_NAME-->
  <td style="padding-left: 0.5em;">
   <div id="projectname">
   <!--BEGIN PROJECT_NUMBER-->&#160;<span id="projectnumber"></span><!--END PROJECT_NUMBER-->
   </div>
   <!--BEGIN PROJECT_BRIEF--><div id="projectbrief">$projectbrief</div><!--END PROJECT_BRIEF-->
  </td>
  <!--END PROJECT_NAME-->
  <!--BEGIN !PROJECT_NAME-->
   <!--BEGIN PROJECT_BRIEF-->
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">$projectbrief</div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
  <!--BEGIN DISABLE_INDEX-->
   <!--BEGIN SEARCHENGINE-->
   <td>$searchbox</td>
   <!--END SEARCHENGINE-->
  <!--END DISABLE_INDEX-->
 </tr>
 </tbody>
</table>
</div>
<!--END TITLEAREA-->
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="contents">


<h1><a class="anchor" id="os_callbacks">Operating System Callbacks </a></h1>
<table><tr>
<td valign="top">
  <div class="navtable" id='navtable' height='100%'>
  <div style='margin: 5px'>
    <ul class='NoBulletNoIndent'>
      <h4>Documentation</h4>
      <li><a href="index.html">Overview</a></li>
      <li><a href="getting_started.html">Getting Started</a></li>
      <li><a href="web_services.html">iDigi Web Services</a></li>

      <h4>API Details</h4>
      <li><a href="api_overview.html">API Overview</a></li>
      <li><a href="os_callbacks.html">Operating System</a></li>
      <li><a href="network_callbacks.html">Network</a></li>
      <li><a href="config_callbacks.html">Configuration</a></li>
      <li><a href="data_service.html">Data Service</a></li>
      <li><a href="firmware_download.html">Firmware Download</a></li>
      <li><a href="globals.html">Index</a></li>

      <h4>Samples</h4>
      <li><a href="send_data.html">Send Data</a></li>
      <li><a href="device_request.html">Device Request</a></li>
      <li><a href="fw_download_sample.html">Firmware download</a></li>

      <h4>More Info</h4>
      <li><a href="../../private/Readme.txt">Release Notes</a></li>
      <li><a href="../../iDigi Integration Kit End-User License Agreement.pdf">License</a></li>

      <h4>Support</h4>
      <li><a href="http://www.digi.com/contactus/email.jsp">Contact Support</a></li>
      <li><a href="http://www.digi.com/support">Support</a></li>
      <li><a href="http://forums.digi.com/support/forum/index">Discussion Forums</a></li>
    </ul>      
   </div>
   </div>
</td>
<td id='maintable' width="100%" valign="top">

<h2><a class="anchor" id="os_callbacks">
Operating System Callbacks</a></h2>
<p>The IIK interafaces to the platforms OS through the callbacks listed below, these are called through the application callback described in the <a class="el" href="api__overview.html#api1_overview">API Overview</a>. The class id is <a class="el" href="group__idigi__class__t.html#gga3d9da89a031dfb425e963b0ae7bfbf33afbfd38403093d8e58eeb3f8ac1971181">idigi_class_operating_system</a>.</p>
<ol type="1">
<li><a class="el" href="os__callbacks.html#malloc">malloc</a></li>
<li><a class="el" href="os__callbacks.html#free">free</a></li>
<li><a class="el" href="os__callbacks.html#uptime">System Uptime</a></li>
<li><a class="el" href="os__callbacks.html#sleep">Sleep</a></li>
</ol>
<h2><a class="anchor" id="malloc">
malloc</a></h2>
<p>Callback is used to dynamically allocate memory.</p>
 
 <table class="apitable">
 <tr> <th colspan="2" class="title">Arguments</th> </tr> 
 <tr><th class="subtitle">Name</th> <th class="subtitle">Description</th></tr>
 <tr>
 <th>class_id</th>
 <td> <a class="el" href="group__idigi__class__t.html#gga3d9da89a031dfb425e963b0ae7bfbf33afbfd38403093d8e58eeb3f8ac1971181">idigi_class_operating_system</a>  </td>
 </tr>
 <tr>
 <th>request_id</th>
 <td> <a class="el" href="group__idigi__os__request__t.html#ggabed3a19de0949244d6bdcfcd81fc8829a9af72b4e6d7babfeedfbda200cf4e712">idigi_os_malloc</a>  </td>
 </tr>
 <tr>
 <th>request_data</th>
 <td>Pointer to number of bytes to be allocated </td>
 </tr>
 <tr>
 <th>request_length</th>
 <td> Specifies the size of *request_data which is sizeof size_t.</td>
 </tr>
 <tr>
 <th>response_data</th>
 <td> Returns a pointer to memory for allocated address </td>
 </tr>
 <tr>
 <th>response_length</th>
 <td>N/A</td>
 <tr> <th colspan="2" class="title">Return Values</th> </tr> 
 <tr><th class="subtitle">Values</th> <th class="subtitle">Description</th></tr>
 <tr>
 <th> <a class="el" href="group__idigi__callback__status__t.html#ggaada37d2b3520ae3522ccf0ed368f458dabda2f93a62bdf6914f7c2f1736b59e94">idigi_callback_continue</a>  </th>
 <td>Callback successfully allocated memory</td>
 </tr>
 <tr>
 <th> <a class="el" href="group__idigi__callback__status__t.html#ggaada37d2b3520ae3522ccf0ed368f458da77b6cf49c4a1cb6d18489ec31112d7fa">idigi_callback_abort</a>  </th>
 <td>Callback was unable to allocate memory and callback aborts IIK</td>
 </tr>
 <tr>
 <th> <a class="el" href="group__idigi__callback__status__t.html#ggaada37d2b3520ae3522ccf0ed368f458da7eeb64c92e877a42a8592a8b05a4ade8">idigi_callback_busy</a>  </th>
 <td>Memory is not available at this time and needs to be called back again</td>
 </tr>
 </table>
 <p>Example:</p>
<div class="fragment"><pre class="fragment"> <a class="code" href="group__idigi__callback__status__t.html#gaada37d2b3520ae3522ccf0ed368f458d">idigi_callback_status_t</a> idigi_callback(<a class="code" href="group__idigi__class__t.html#ga3d9da89a031dfb425e963b0ae7bfbf33">idigi_class_t</a> <span class="keyword">const</span> class_id, <a class="code" href="unionidigi__request__t.html">idigi_request_t</a> <span class="keyword">const</span> request_id
                              <span class="keywordtype">void</span> * <span class="keyword">const</span> request_data, <span class="keywordtype">size_t</span> <span class="keyword">const</span> request_length,
                              <span class="keywordtype">void</span> * response_data, <span class="keywordtype">size_t</span> * <span class="keyword">const</span> response_length)
 {

     <span class="keywordflow">if</span> (class_id = <a class="code" href="group__idigi__class__t.html#gga3d9da89a031dfb425e963b0ae7bfbf33afbfd38403093d8e58eeb3f8ac1971181">idigi_class_operating_system</a> &amp;&amp; request_id.os_request == <a class="code" href="group__idigi__os__request__t.html#ggabed3a19de0949244d6bdcfcd81fc8829a9af72b4e6d7babfeedfbda200cf4e712">idigi_os_malloc</a>)
     {
         <span class="keywordtype">size_t</span> size = *(<span class="keywordtype">size_t</span> *)request_data;
         <span class="keywordtype">void</span> ** ptr = (<span class="keywordtype">void</span> **)response_data;

         *ptr = malloc(size);
         <span class="keywordflow">if</span> (*ptr == NULL)
         {
             <span class="keywordflow">return</span> <a class="code" href="group__idigi__callback__status__t.html#ggaada37d2b3520ae3522ccf0ed368f458da77b6cf49c4a1cb6d18489ec31112d7fa">idigi_callback_abort</a>;
         }
     }
     <span class="keywordflow">return</span> <a class="code" href="group__idigi__callback__status__t.html#ggaada37d2b3520ae3522ccf0ed368f458dabda2f93a62bdf6914f7c2f1736b59e94">idigi_callback_continue</a>;
 }
</pre></div><h2><a class="anchor" id="free">
free</a></h2>
<p>Callback is called to free previous allocated memory.</p>
 
 <table class="apitable">
 <tr> <th colspan="2" class="title">Arguments</th> </tr> 
 <tr><th class="subtitle">Name</th> <th class="subtitle">Description</th></tr>
 <tr>
 <th>class_id</th>
 <td> <a class="el" href="group__idigi__class__t.html#gga3d9da89a031dfb425e963b0ae7bfbf33afbfd38403093d8e58eeb3f8ac1971181">idigi_class_operating_system</a>  </td>
 </tr>
 <tr>
 <th>request_id</th>
 <td> <a class="el" href="group__idigi__os__request__t.html#ggabed3a19de0949244d6bdcfcd81fc8829af29239a115d9f734b6f1d9054f3b3e35">idigi_os_free</a>  </td>
 </tr>
 <tr>
 <th>request_data</th>
 <td>Pointer address to be freed </td>
 </tr>
 <tr>
 <th>request_length</th>
 <td> Specifies the size of *request_data which is size of void*.</td>
 </tr>
 <tr>
 <th>response_data</th>
 <td> N/A </td>
 </tr>
 <tr>
 <th>response_length</th>
 <td>N/A</td>
 </tr>
 <tr> <th colspan="2" class="title">Return Values</th> </tr> 
 <tr><th class="subtitle">Values</th> <th class="subtitle">Description</th></tr>
 <tr>
 <th>None</th>
 <td>None</td>
 </tr>
 </table>
 <p>Example:</p>
<div class="fragment"><pre class="fragment"> <a class="code" href="group__idigi__callback__status__t.html#gaada37d2b3520ae3522ccf0ed368f458d">idigi_callback_status_t</a> idigi_callback(<a class="code" href="group__idigi__class__t.html#ga3d9da89a031dfb425e963b0ae7bfbf33">idigi_class_t</a> <span class="keyword">const</span> class_id, <a class="code" href="unionidigi__request__t.html">idigi_request_t</a> <span class="keyword">const</span> request_id
                              <span class="keywordtype">void</span> * <span class="keyword">const</span> request_data, <span class="keywordtype">size_t</span> <span class="keyword">const</span> request_length,
                              <span class="keywordtype">void</span> * response_data, <span class="keywordtype">size_t</span> * <span class="keyword">const</span> response_length)
 {

     <span class="keywordflow">if</span> (class_id = <a class="code" href="group__idigi__class__t.html#gga3d9da89a031dfb425e963b0ae7bfbf33afbfd38403093d8e58eeb3f8ac1971181">idigi_class_operating_system</a> &amp;&amp; request_id.os_request == <a class="code" href="group__idigi__os__request__t.html#ggabed3a19de0949244d6bdcfcd81fc8829af29239a115d9f734b6f1d9054f3b3e35">idigi_os_free</a>)
     {
         free((<span class="keywordtype">void</span> *)request_data);
     }
     <span class="keywordflow">return</span> <a class="code" href="group__idigi__callback__status__t.html#ggaada37d2b3520ae3522ccf0ed368f458dabda2f93a62bdf6914f7c2f1736b59e94">idigi_callback_continue</a>;
 }
</pre></div><h2><a class="anchor" id="uptime">
System Uptime</a></h2>
<p>This callback is called to return system up time in seconds. It is the time that a device has been up and running.</p>
 
 <table class="apitable">
 <tr> <th colspan="2" class="title">Arguments</th> </tr> 
 <tr><th class="subtitle">Name</th> <th class="subtitle">Description</th></tr>
 <tr>
 <th>class_id</th>
 <td> <a class="el" href="group__idigi__class__t.html#gga3d9da89a031dfb425e963b0ae7bfbf33afbfd38403093d8e58eeb3f8ac1971181">idigi_class_operating_system</a>  </td>
 </tr>
 <tr>
 <th>request_id</th>
 <td> <a class="el" href="group__idigi__os__request__t.html#ggabed3a19de0949244d6bdcfcd81fc8829a4ceb1b3a1a475adb93e1723bf8bb1945">idigi_os_system_up_time</a>  </td>
 </tr>
 <tr>
 <th>request_data</th>
 <td>N/A </td>
 </tr>
 <tr>
 <th>request_length</th>
 <td> N/A</td>
 </tr>
 <tr>
 <th>response_data</th>
 <td> Pointer to uint32_t integer memory where callback writes the system up time to (in seconds) </td>
 </tr>
 <tr>
 <th>response_length</th>
 <td> N/A</td>
 </tr>
 <tr> <th colspan="2" class="title">Return Values</th> </tr> 
 <tr><th class="subtitle">Values</th> <th class="subtitle">Description</th></tr>
 <tr>
 <th> <a class="el" href="group__idigi__callback__status__t.html#ggaada37d2b3520ae3522ccf0ed368f458dabda2f93a62bdf6914f7c2f1736b59e94">idigi_callback_continue</a>  </th>
 <td>Callback successfully returned the system time</td>
 </tr>
 <tr>
 <th> <a class="el" href="group__idigi__callback__status__t.html#ggaada37d2b3520ae3522ccf0ed368f458da77b6cf49c4a1cb6d18489ec31112d7fa">idigi_callback_abort</a>  </th>
 <td>Error occurred and callback aborted IIK</td>
 </tr>
 </table>
 <p>Example:</p>
<div class="fragment"><pre class="fragment"> <a class="code" href="group__idigi__callback__status__t.html#gaada37d2b3520ae3522ccf0ed368f458d">idigi_callback_status_t</a> idigi_callback(<a class="code" href="group__idigi__class__t.html#ga3d9da89a031dfb425e963b0ae7bfbf33">idigi_class_t</a> <span class="keyword">const</span> class_id, <a class="code" href="unionidigi__request__t.html">idigi_request_t</a> <span class="keyword">const</span> request_id
                              <span class="keywordtype">void</span> * <span class="keyword">const</span> request_data, <span class="keywordtype">size_t</span> <span class="keyword">const</span> request_length,
                              <span class="keywordtype">void</span> * response_data, <span class="keywordtype">size_t</span> * <span class="keyword">const</span> response_length)
 {

     <span class="keywordflow">if</span> (class_id = <a class="code" href="group__idigi__class__t.html#gga3d9da89a031dfb425e963b0ae7bfbf33afbfd38403093d8e58eeb3f8ac1971181">idigi_class_operating_system</a> &amp;&amp; request_id.os_request == <a class="code" href="group__idigi__os__request__t.html#ggabed3a19de0949244d6bdcfcd81fc8829a4ceb1b3a1a475adb93e1723bf8bb1945">idigi_os_system_up_time</a>)
     {
         time((time_t *)response_data);
     }
     <span class="keywordflow">return</span> <a class="code" href="group__idigi__callback__status__t.html#ggaada37d2b3520ae3522ccf0ed368f458dabda2f93a62bdf6914f7c2f1736b59e94">idigi_callback_continue</a>;
 }
</pre></div><h2><a class="anchor" id="sleep">
Sleep</a></h2>
<p>This callback is called relinquish control of the CPU (multithreaded model).</p>
 
 <table class="apitable">
 <tr> <th colspan="2" class="title">Arguments</th> </tr> 
 <tr><th class="subtitle">Name</th> <th class="subtitle">Description</th></tr>
 <tr>
 <th>class_id</th>
 <td> <a class="el" href="group__idigi__class__t.html#gga3d9da89a031dfb425e963b0ae7bfbf33afbfd38403093d8e58eeb3f8ac1971181">idigi_class_operating_system</a>  </td>
 </tr>
 <tr>
 <th>request_id</th>
 <td> <a class="el" href="group__idigi__os__request__t.html#ggabed3a19de0949244d6bdcfcd81fc8829a6a006ba8be2e588669ecedaad7b93f90">idigi_os_sleep</a>  </td>
 </tr>
 <tr>
 <th>request_data</th>
 <td>Number of seconds to sleep up to (the user can sleep less)</td>
 </tr>
 <tr>
 <th>request_length</th>
 <td> N/A</td>
 </tr>
 <tr>
 <th>response_data</th>
 <td> N/A</td>
 </tr>
 <tr>
 <th>response_length</th>
 <td> N/A</td>
 </tr>
 <tr> <th colspan="2" class="title">Return Values</th> </tr> 
 <tr><th class="subtitle">Values</th> <th class="subtitle">Description</th></tr>
 <tr>
 <th> <a class="el" href="group__idigi__callback__status__t.html#ggaada37d2b3520ae3522ccf0ed368f458dabda2f93a62bdf6914f7c2f1736b59e94">idigi_callback_continue</a>  </th>
 <td>Callback successfully was able to sleep</td>
 </tr>
 <tr>
 <th> <a class="el" href="group__idigi__callback__status__t.html#ggaada37d2b3520ae3522ccf0ed368f458da77b6cf49c4a1cb6d18489ec31112d7fa">idigi_callback_abort</a>  </th>
 <td>Error occurred and callback aborted IIK</td>
 </tr>
 </table>
 <p>Example:</p>
<div class="fragment"><pre class="fragment"> <a class="code" href="group__idigi__callback__status__t.html#gaada37d2b3520ae3522ccf0ed368f458d">idigi_callback_status_t</a> idigi_callback(<a class="code" href="group__idigi__class__t.html#ga3d9da89a031dfb425e963b0ae7bfbf33">idigi_class_t</a> <span class="keyword">const</span> class_id, <a class="code" href="unionidigi__request__t.html">idigi_request_t</a> <span class="keyword">const</span> request_id
                              <span class="keywordtype">void</span> * <span class="keyword">const</span> request_data, <span class="keywordtype">size_t</span> <span class="keyword">const</span> request_length,
                              <span class="keywordtype">void</span> * response_data, <span class="keywordtype">size_t</span> * <span class="keyword">const</span> response_length)
 {

     <span class="keywordflow">if</span> (class_id = <a class="code" href="group__idigi__class__t.html#gga3d9da89a031dfb425e963b0ae7bfbf33afbfd38403093d8e58eeb3f8ac1971181">idigi_class_operating_system</a> &amp;&amp; request_id.os_request == <a class="code" href="group__idigi__os__request__t.html#ggabed3a19de0949244d6bdcfcd81fc8829a6a006ba8be2e588669ecedaad7b93f90">idigi_os_sleep</a>)
     {
         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *timeout_seconds = request_data;
         usleep(*timeout_seconds * MICROSECONDS_PER_SECOND);
     }
     <span class="keywordflow">return</span> <a class="code" href="group__idigi__callback__status__t.html#ggaada37d2b3520ae3522ccf0ed368f458dabda2f93a62bdf6914f7c2f1736b59e94">idigi_callback_continue</a>;
 }
</pre></div> </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<!--BEGIN GENERATE_TREEVIEW-->
    <li class="footer">$generatedby
    <a href="http://www.idigi.com">
   </ul>
 </div>
<!--END GENERATE_TREEVIEW-->
<!--BEGIN !GENERATE_TREEVIEW-->
<hr class="footer"/><address class="footer">
<center>
<a href="http://www.idigi.com">
</a> Copyright 1996-2011 Digi International Inc. All rights reserved.
</center>
</address>
<!--END !GENERATE_TREEVIEW-->
</body>
</html>
