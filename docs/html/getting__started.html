<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <!--BEGIN PROJECT_NAME--><title>: Getting Started</title><!--END PROJECT_NAME-->
    <!--BEGIN !PROJECT_NAME--><title>Getting Started</title><!--END !PROJECT_NAME-->
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
    <link href="customdoxygen.css" rel="stylesheet" type="text/css" />
    $treeview
    $search
    $mathjax
    <script type="text/javascript" src="utils.js"></script>
  </head>
<body onload="navlink()">
<div id="top"><!-- do not remove this div! -->

<!--BEGIN TITLEAREA-->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <!--BEGIN PROJECT_LOGO-->
  <td id="projectlogo"><a href="index.html"><img alt="Logo" src="$projectlogo"/></a></td>
  <!--END PROJECT_LOGO-->
  <!--BEGIN PROJECT_NAME-->
  <td style="padding-left: 0.5em;">
   <div id="projectname">
   <!--BEGIN PROJECT_NUMBER-->&#160;<span id="projectnumber"></span><!--END PROJECT_NUMBER-->
   </div>
   <!--BEGIN PROJECT_BRIEF--><div id="projectbrief">$projectbrief</div><!--END PROJECT_BRIEF-->
  </td>
  <!--END PROJECT_NAME-->
  <!--BEGIN !PROJECT_NAME-->
   <!--BEGIN PROJECT_BRIEF-->
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">$projectbrief</div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
  <!--BEGIN DISABLE_INDEX-->
   <!--BEGIN SEARCHENGINE-->
   <td>$searchbox</td>
   <!--END SEARCHENGINE-->
  <!--END DISABLE_INDEX-->
 </tr>
 </tbody>
</table>
</div>
<!--END TITLEAREA-->
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="contents">


<h1><a class="anchor" id="getting_started">Getting Started </a></h1>
<table><tr>
<td valign="top">
  <div class="navtable" id='navtable' height='100%'>
  <div style='margin: 5px'>
    <ul class='NoBulletNoIndent'>
      <h4>Documentation</h4>
      <li><a href="index.html">Overview</a></li>
      <li><a href="getting_started.html">Getting Started</a></li>
      <li><a href="web_services.html">iDigi Web Services</a></li>

      <h4>API Details</h4>
      <li><a href="api_overview.html">API Overview</a></li>
      <li><a href="os_callbacks.html">Operating System</a></li>
      <li><a href="network_callbacks.html">Network</a></li>
      <li><a href="config_callbacks.html">Configuration</a></li>
      <li><a href="data_service.html">Data Service</a></li>
      <li><a href="firmware_download.html">Firmware Download</a></li>
      <li><a href="globals.html">Index</a></li>

      <h4>Samples</h4>
      <li><a href="send_data.html">Send Data</a></li>
      <li><a href="device_request.html">Device Request</a></li>
      <li><a href="fw_download_sample.html">Firmware download</a></li>

      <h4>More Info</h4>
      <li><a href="../../private/Readme.txt">Release Notes</a></li>
      <li><a href="../../iDigi Integration Kit End-User License Agreement.pdf">License</a></li>

      <h4>Support</h4>
      <li><a href="http://www.digi.com/contactus/email.jsp">Contact Support</a></li>
      <li><a href="http://www.digi.com/support">Support</a></li>
      <li><a href="http://forums.digi.com/support/forum/index">Discussion Forums</a></li>
    </ul>      
   </div>
   </div>
</td>
<td id='maintable' width="100%" valign="top">

<h2><a class="anchor" id="table_of_contents_porting">
Getting Started</a></h2>
<p>The Getting Started process will walk you through the steps necessary to get the IIK integrated into your development environment and running applications which connect to the iDigi Device Cloud.</p>
<p>These steps include:</p>
<ol type="1">
<li><a class="el" href="getting__started.html#step1">Step 1: Determine if your compiler is C89 or C99 compliant</a><ol type="a">
<li><a class="el" href="getting__started.html#debug_macros">Implement the debug macros</a></li>
</ol>
</li>
<li><a class="el" href="getting__started.html#step2">Step 2: Modify idigi_config.h</a></li>
<li><a class="el" href="getting__started.html#step3">Step 3: Build the compile_and_link sample</a><ol type="a">
<li><a class="el" href="getting__started.html#idigi_initialization">IIK Initialization</a></li>
<li><a class="el" href="getting__started.html#add_files">Add the source files to your build system</a></li>
<li><a class="el" href="getting__started.html#add_path">Add the include paths</a></li>
<li><a class="el" href="getting__started.html#build_sample">Build the sample</a></li>
</ol>
</li>
<li><a class="el" href="getting__started.html#step4">Step 4: Get a vendor and device ID</a><ol type="a">
<li><a class="el" href="getting__started.html#idigi_login">Login to the iDigi Server</a></li>
<li><a class="el" href="getting__started.html#idigi_vendor_id">Obtain an iDigi Vendor ID</a></li>
<li><a class="el" href="getting__started.html#idigi_device_id">Obtain an iDigi Device ID</a></li>
</ol>
</li>
<li><a class="el" href="getting__started.html#step5">Step 5: Setup your platform</a><ol type="a">
<li><a class="el" href="getting__started.html#os_routines">OS Routines</a></li>
<li><a class="el" href="getting__started.html#network_routines">Network Routines</a></li>
<li><a class="el" href="getting__started.html#configuration_routines">Configuration Routines</a></li>
<li><a class="el" href="getting__started.html#default_config">Hard Code Configuration</a></li>
<li><a class="el" href="getting__started.html#application_start">iDigi Initialization</a></li>
</ol>
</li>
<li><a class="el" href="getting__started.html#step6">Step 6: Setup your build environment</a><ol type="a">
<li><a class="el" href="getting__started.html#add_c_files">Add the source files to your build system</a></li>
<li><a class="el" href="getting__started.html#add_include_paths">Add the include paths</a></li>
</ol>
</li>
<li><a class="el" href="getting__started.html#step7">Step 7: Build the connect_to_idigi sample</a></li>
<li><a class="el" href="getting__started.html#step8">Step 8: View results</a><ol type="a">
<li><a class="el" href="getting__started.html#add_your_device_to_the_cloud">Add your Device to the iDigi Developer Cloud</a></li>
<li><a class="el" href="getting__started.html#view_result_on_cloud">Viewing Results on the iDigi Developer Cloud</a></li>
</ol>
</li>
<li><a class="el" href="getting__started.html#step9">Step 9: Next Steps</a></li>
</ol>
<p>Two sample applications, compile_and_link and connect_to_idigi, will be used to confirm your compilation tool chain and integration, respectively. When complete, your device device will be connected to the iDigi Device Cloud and be displayed in the iDigi Device Cloud Portal graphical user interface.</p>
<h2><a class="anchor" id="step1">
Step 1: Determine if your compiler is C89 or C99 compliant</a></h2>
<p>The IIK is ANSI X3.159-1989 (ANSI C89) and ISO/IEC 9899:1999 (ANSI C99) compliant. If your compiler is ANSI C89 or C99 compliant and you are running on a 32-bit processor you can skip to the next section.</p>
<p>If your compiler is not ANSI C89 or C99 compliant, you will have to review (and edit) <a class="el" href="idigi__types_8h.html" title="Types required by the IIK.">public/include/idigi_types.h</a> to adjust the data types <a class="el" href="group__user__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>, <a class="el" href="group__user__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a>, <a class="el" href="group__user__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a>.</p>
<ul>
<li><a class="el" href="group__user__types.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> </li>
<li><a class="el" href="group__user__types.html#ga273cf69d639a59973b6019625df33e30">uint16_t</a> </li>
<li><a class="el" href="group__user__types.html#ga06896e8c53f721507066c079052171f8">uint32_t</a></li>
</ul>
<p>Note by default these are defined for a 32-bit machine.</p>
<h3><a class="anchor" id="debug_macros">
Implement the debug macros</a></h3>
<p>The file <a class="el" href="idigi__types_8h.html" title="Types required by the IIK.">public/include/idigi_types.h</a> implements the two macros listed below, which are used to debug the IIK.</p>
<ul>
<li><a class="el" href="group___d_e_b_u_g___m_a_c_r_o_s.html#ga8e5a1b02e45ebe8fea77b87c145bc56f">USER_DEBUG_VPRINTF</a> </li>
<li><a class="el" href="group___d_e_b_u_g___m_a_c_r_o_s.html#ga0966b817b229d48e5ffc7feab19a0be6">ASSERT</a></li>
</ul>
<p>Review these definitions and modify these for your platform:</p>
<p>If you don't have vprintf or assert available redefine these macros to call corresponding routines for your platform.</p>
<h2><a class="anchor" id="step2">
Step 2: Modify idigi_config.h</a></h2>
<p>Open the file <a class="el" href="idigi__config_8h.html" title="IIK configuration options.">public/include/idigi_config.h</a> to configure processor endianess.</p>
<p>The IIK defaults to little endian. To reconfigure for big endian, comment out the <a class="el" href="group__idigi__config__options.html#ga3ef2cf25e8930717416a014d0f8f81ea">IDIGI_LITTLE_ENDIAN</a> define.</p>
<p>If your application does not want the optional Data Compression (see <a class="el" href="index.html#zlib">Optional Data Compression Support</a>) then comment out <a class="el" href="group__idigi__config__options.html#ga72ce58ac068c07d045fab82e533e66c3">IDIGI_COMPRESSION</a>, if compression is supported leave this define alone.</p>
<h2><a class="anchor" id="step3">
Step 3: Build the compile_and_link sample</a></h2>
<p>In this step we are going to build the compile_and_link sample, this sample will verify that your build environment is setup correctly. You need to add the source files and include paths to your build system listed below.</p>
<h3><a class="anchor" id="idigi_initialization">
IIK Initialization</a></h3>
<p>The routine <a class="el" href="group__idigi__init.html#ga10767cc6668eec9bfc426181af798053">idigi_init()</a> is called to initialize the IIK, currently this is called from the routine main() in main.c; you will need to call <a class="el" href="group__idigi__init.html#ga10767cc6668eec9bfc426181af798053">idigi_init()</a> at the initialization point for your application with an application's callback. For the compile_and_link sample you can call idigi_init as:</p>
<div class="fragment"><pre class="fragment"> <span class="comment">/* </span>
<span class="comment">  * Call idigi_init() where you intend to initialize the IIK, a NULL callback </span>
<span class="comment">  * is passed into idigi_init() for this sample, we want the IIK to be linked in </span>
<span class="comment">  * to verify the build.</span>
<span class="comment">  */</span>
 (void)<a class="code" href="group__idigi__init.html#ga10767cc6668eec9bfc426181af798053">idigi_init</a>((<a class="code" href="group__idigi__callback__t.html#ga1a64686831c5c6f9c03cf8391fede0a7">idigi_callback_t</a>)0);
</pre></div><p>If you are not using main() you will need to add in the call to <a class="el" href="group__idigi__init.html#ga10767cc6668eec9bfc426181af798053">idigi_init()</a> where appropriate.</p>
<h3><a class="anchor" id="add_files">
Add the source files to your build system</a></h3>
<p>The following is a list of files to add to your build system, there is a sample linux Makefile provided (public/run/samples/compile_and_link/Makefile) which you can use as a reference. Add the following files to your make/build system.</p>
 
 <table class="apitable">
 <tr>
 <th class="title">Name</td>
 <th class="title">Description</td>
 <th class="title">Location</td>
 </tr>
 <tr>
 <td>idigi_api.c</td>
 <td>Contains the code for the IIK</td>
 <td>private</td>
 </tr>
 <tr>
 <td>main.c</td>
 <td>Program entry point, calls  <a class="el" href="group__idigi__init.html#ga10767cc6668eec9bfc426181af798053">idigi_init()</a>  </td>
 <td>public/run/samples/compile_and_link</td>
 </tr>
 </table>
 <h3><a class="anchor" id="add_path">
Add the include paths</a></h3>
<p>The following is a list of include paths to add to your system:</p>
<ul>
<li>public/include</li>
</ul>
<h3><a class="anchor" id="add_define">
Add the defines</a></h3>
<p>The following define is required, this is used to indicate the version of the IIK is 1.1</p>
<ul>
<li>IDIGI_VERSION=0x1010000UL</li>
</ul>
<h3><a class="anchor" id="build_sample">
Build the sample</a></h3>
<p>Now that you have the build environment setup, verify that you can compile and link. If you are using the Makefile provided, type make in the compile_and_link directory, otherwise execute the build for your system. If you are experiencing a build problem double check the steps listed above. There is only one include path and two C files to build this sample. Once the build is successful you can proceed to the next step.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Do not execute the compile_and_link sample, this only verifies that the build environment is setup correctly, the application will ASSERT when run.</dd></dl>
<h2><a class="anchor" id="step4">
Step 4: Get a vendor and device ID</a></h2>
<h3><a class="anchor" id="idigi_account">
Create an iDigi Account</a></h3>
<p>Before getting started you will need to create a new iDigi account, to create an account navigate to <a href="https://developer.idigi.com/user_registration.do">https://developer.idigi.com/user_registration.do</a> and fill out the iDigi registration form. If you are a current iDigi developer account user, login with your existing user name and password and proceed to:</p>
<div align="center">
<img src="idigi1.jpg" alt="idigi1.jpg"/>
</div>
<h3><a class="anchor" id="idigi_login">
Login to the iDigi Server</a></h3>
<p>1. Navigate to <a href="http://www.idigi.com">http://www.idigi.com</a></p>
<p>2. Click the iDigi Login button in the upper right corner of the page.</p>
<div align="center">
<img src="idigi2.jpg" alt="idigi2.jpg"/>
</div>
<p>3. Click the iDigi Developer Cloud Login button.</p>
<div align="center">
<img src="idigi3.jpg" alt="idigi3.jpg"/>
</div>
<p>You will be redirected to the iDigi Developer Cloud login page.</p>
<p>4. Login with the user credentials you created in section <a class="el" href="getting__started.html#idigi_account">Create an iDigi Account</a></p>
<div align="center">
<img src="idigi4.jpg" alt="idigi4.jpg"/>
</div>
<h3><a class="anchor" id="idigi_vendor_id">
Obtain an iDigi Vendor ID</a></h3>
<dl class="note"><dt><b>Note:</b></dt><dd>You will need to contact Digi to request a vendor ID. You will need the vendor ID before your device can connect to iDigi.</dd></dl>
<p>To request a vendor ID within iDigi:</p>
<p>1. Click on My Account within the left navigation panel.</p>
<p>2. Click the Register for new vendor id button.</p>
<div align="center">
<img src="idigi5.jpg" alt="idigi5.jpg"/>
</div>
<p>The page will refresh and your unique vendor ID number will be displayed in place of the Register for new vendor id button. Record the Vendor ID you will need it later.</p>
<div align="center">
<img src="idigi6.jpg" alt="idigi6.jpg"/>
</div>
<h3><a class="anchor" id="idigi_device_id">
Obtain an iDigi Device ID</a></h3>
<p>Device IDs are a globally unique identifier for iDigi clients. The Device ID is a 16-octet value derived from the MAC address of a network interface on the client. The mapping from MAC address to Device ID consist of inserting "FFFF" in the middle of the MAC and setting all other bytes of the Device ID to 0. For Example: MAC Address 00:04:2D:01:6A:53, would map to a Device ID: 00000000-00042DFF-FF016A53 If a client has more than one network interface, it does not matter to iDigi which network interface MAC is used for the basis of the Device ID. If the MAC is read directly from the network interface to generate the client's Device ID, care must be taken to always use the same network interface's MAC since there is a unique mapping between a device and a Device ID. Use the above mapping with your MAC address to create the Device ID and record it for later.</p>
<h2><a class="anchor" id="step5">
Step 5: Setup your platform</a></h2>
<p>Go into the platforms directory and select a platform which is the similar to your platform, if none of the available platforms are similar to yours you can use the template platform.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>In this release of the IIK only the Linux platform is provided.</dd></dl>
<p>In this guide we use the public/run/platforms/linux as an example, but all platforms have the same structure. So choose a platform (or copy an existing one) and go into that directory.</p>
<h3><a class="anchor" id="os_routines">
OS Routines</a></h3>
<p>Open the file <a class="el" href="os_8c.html" title="Functions used by the IIK to interface to the OS.">os.c</a> and implement the routines listed below, for the linux platform the file is located at public/run/platforms/<em>my_platform/os.c</em>. Click on the routine to see a description, then modify to operate with your platform. These routines are callbacks which are described in the API section.</p>
<ul>
<li><a class="el" href="os_8c.html#a9dc0395e74b78f4bbe28c97edb1b3d6b" title="Dynamically allocate memory.">app_os_malloc()</a> </li>
<li><a class="el" href="os_8c.html#a55245355cccddb28eb351a6728714e22" title="Free Dynamically allocate memory.">app_os_free()</a> </li>
<li><a class="el" href="os_8c.html#a7d1a642211a13bf597dfff1fec8ce26c" title="Get the system time.">app_os_get_system_time()</a> </li>
<li><a class="el" href="os_8c.html#a849afd0fdf4cd635d341184d89d063f0" title="Sleep or relinquish for other task execution.">app_os_sleep()</a></li>
</ul>
<h3><a class="anchor" id="network_routines">
Network Routines</a></h3>
<p>Open the file <a class="el" href="network_8c.html" title="Rountines which implement the IIK network interface.">network.c</a> and implement the network interface routines. The network interface routines provided in the Linux platform are implemented using standard Berkeley socket calls and can be used as a reference for your platform. You may have to modify the routines in this file based on your platforms network implementation.</p>
<p>The following is a list of network interface routines which must be implemented: </p>
<ul>
<li><a class="el" href="network_8c.html#a9dc69781c58510962d0bbca3aef8cd86" title="Connect to the iDigi server.">app_network_connect()</a> </li>
<li><a class="el" href="network_8c.html#a03322df02ba77acec61357658cb02178" title="Send data to the iDigi server.">app_network_send()</a> </li>
<li><a class="el" href="network_8c.html#a8701f9056628d15ef7af3902b9516443" title="Receive data from the iDigi server.">app_network_receive()</a> </li>
<li><a class="el" href="network_8c.html#aaae5942657b1cd15f43d223de127ceb7" title="Close the connection to the iDigi server.">app_network_close()</a></li>
</ul>
<h3><a class="anchor" id="configuration_routines">
Configuration Routines</a></h3>
<p>In this step we setup the configuration routines for your platform. Each configuration item has a corresponding get routine for retrieving its value. Open the file <a class="el" href="config_8c.html" title="Configuration routines for the IIK.">config.c</a> for your platform and implement the configuration routines. All configuration routines are passed in a pointer to a pointer, along with a pointer to the size. The address of the configuration item is stored in the pointer passed in, and the size is assigned to the pointer to the size variable. For example <a class="el" href="config_8c.html#a31d9d8bad0ad2e9fc08fb86bdd9c1582" title="Get the iDigi server URL.">app_get_server_url()</a> is the routine used to retrieve the iDigi Developer Cloud URL and is shown below. </p>
<div class="fragment"><pre class="fragment">  <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="config_8c.html#a31d9d8bad0ad2e9fc08fb86bdd9c1582" title="Get the iDigi server URL.">app_get_server_url</a>(<span class="keywordtype">char</span> ** url, <span class="keywordtype">size_t</span> * size)
  {
<span class="preprocessor">  #error &quot;Specify iDigi Server URL&quot; </span><span class="comment">/* This #error must be removed to compile */</span>
      <span class="comment">/* Statically allocated string containing the sever URL */</span>
      <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <span class="keyword">const</span> *idigi_server_url = <span class="stringliteral">&quot;developer.idigi.com&quot;</span>;
  
      <span class="comment">/* Fill in the pointer with the address of the URL in memory */</span>
      *url = (<span class="keywordtype">char</span> *)idigi_server_url;
      <span class="comment">/* Fill in the size */</span>
      *size = strlen(idigi_server_url);
  
      <span class="keywordflow">return</span> 0;
  }
</pre></div><dl class="note"><dt><b>Note:</b></dt><dd>The required routines contain the  #error  preprocessor directive which must be removed before compiling.</dd>
<dd>
The memory assigned to configuration items must be <b>statically</b> <b>allocated</b> and is accessed by the IIK after the routine returns.</dd></dl>
<p>The following is a list of configuration routines which needs to be implemented for your platform, please review each routine: </p>
<ul>
<li><a class="el" href="config_8c.html#af797bde6064d097e5ca359264362e367" title="Get the IP address of the device.">app_get_ip_address()</a> </li>
<li><a class="el" href="config_8c.html#a827d9eefecdf87ae59a3a1472e79bb2b" title="Get the MAC address of the device.">app_get_mac_addr()</a> </li>
<li><a class="el" href="config_8c.html#a46991622a2ed9a10dfa212520bc899ac" title="Get the iDigi device ID.">app_get_device_id()</a> </li>
<li><a class="el" href="config_8c.html#a7c8083af6e04ca00e7e4d2ae43a52549" title="Get the iDigi vendor ID.">app_get_vendor_id()</a> </li>
<li><a class="el" href="config_8c.html#ac660a95cf2f2f59822c4c89bbf2befd0" title="Get the device type.">app_get_device_type()</a> </li>
<li><a class="el" href="config_8c.html#a31d9d8bad0ad2e9fc08fb86bdd9c1582" title="Get the iDigi server URL.">app_get_server_url()</a> </li>
<li><a class="el" href="config_8c.html#a9536ef091d7e6f9083d3754370595f89" title="Get the connection type.">app_get_connection_type()</a> </li>
<li><a class="el" href="config_8c.html#a875a6e3faf565d67002e8b2797f14e6e" title="Get the link speed.">app_get_link_speed()</a> </li>
<li><a class="el" href="config_8c.html#a8cc77a993ff3e4963afac9d312e44ef4" title="Get the WAN phone number.">app_get_phone_number()</a> </li>
<li><a class="el" href="config_8c.html#a24cf0dc8ff9aaaec7f538301f69e0adb" title="Get the TX keepalive interval.">app_get_tx_keepalive_interval()</a> </li>
<li><a class="el" href="config_8c.html#a37f048759ef3eb18cac8f2ed7fa5d6eb" title="Get the RX keepalive interval.">app_get_rx_keepalive_interval()</a> </li>
<li><a class="el" href="config_8c.html#a2c72dd53db0807607bb31e6a770797c3" title="Get the wait count.">app_get_wait_count()</a> </li>
<li><a class="el" href="config_8c.html#ab1b921910d85e6996a3423abd1a4d4d5" title="Return true if firmware download is supported.">app_get_firmware_support()</a> </li>
<li><a class="el" href="config_8c.html#a00e2239b128f1a071eacd35a29050b3d" title="Return true if the data service is supported.">app_get_data_service_support()</a> </li>
<li><a class="el" href="config_8c.html#a400d349f550cf8ed2dc3f5c3d0546862" title="Return maximum transactions.">app_get_max_message_transactions()</a> </li>
<li><a class="el" href="config_8c.html#a95500fed93f0e24d87e8e3e61e7ab2b1" title="Error status notification.">app_config_error()</a></li>
</ul>
<h3><a class="anchor" id="default_config">
Hard Code Configuration</a></h3>
<p>If the following configurations in <a class="el" href="idigi__config_8h.html">idigi_config.h</a> are defined, the callback is not used or called for these configurations. This reduces code size and memory usage. You can define individual configuration.</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #define IDIGI_DEVICE_TYPE               &quot;IIK Linux Sample&quot;</span>
<span class="preprocessor"></span><span class="preprocessor"> #define IDIGI_CLOUD_URL                 &quot;developer.idigi.com&quot; </span>
<span class="preprocessor"></span><span class="preprocessor"> #define IDIGI_TX_KEEPALIVE_IN_SECONDS   75</span>
<span class="preprocessor"></span><span class="preprocessor"> #define IDIGI_RX_KEEPALIVE_IN_SECONDS   75</span>
<span class="preprocessor"></span><span class="preprocessor"> #define IDIGI_WAIT_COUNT                10</span>
<span class="preprocessor"></span><span class="preprocessor"> #define IDIGI_VENDOR_ID                 0x00000000</span>
<span class="preprocessor"></span><span class="preprocessor"> #define IDIGI_MSG_MAX_TRANSACTION       1</span>
<span class="preprocessor"></span>
<span class="preprocessor"> #define IDIGI_CONNECTION_TYPE                      idigi_lan_connection_type</span>
<span class="preprocessor"></span><span class="preprocessor"> #define IDIGI_WAN_LINK_SPEED_IN_BITS_PER_SECOND    0</span>
<span class="preprocessor"></span><span class="preprocessor"> #define IDIGI_WAN_PHONE_NUMBER_DIALED              &quot;012345678&quot;</span>
<span class="preprocessor"></span> 
<span class="preprocessor"> #define IDIGI_FIRMWARE_SUPPORT</span>
<span class="preprocessor"> #define IDIGI_DATA_SERVICE_SUPPORT</span>
</pre></div> 
 <table class="apitable">
 <tr>
 <th class="title">Configuration Defines</td>
 <th class="title">Description</td>
 </tr>
 <tr>
 <td> <a class="el" href="group__idigi__config__data__options.html#ga4221964c6d18cb2ae13ea013bbdb59a5">IDIGI_DEVICE_TYPE</a>  </td>
 <td>Device type in iso-8859-1 encoded string to identify the device.
 See  <a class="el" href="config__callbacks.html#device_type">Device Type</a>  </td>
 </tr>
 <tr>
 <td> <a class="el" href="group__idigi__config__data__options.html#ga60891b6d018c55fb485249ff30505552">IDIGI_CLOUD_URL</a>  </td>
 <td>iDigi Device Cloud FQDN.
 See  <a class="el" href="config__callbacks.html#server_url">iDigi Server URL</a>  </td>
 </tr>
 <tr>
 <td> <a class="el" href="group__idigi__config__data__options.html#ga9ccf5445ffd00b6f32cc55b1ad2eb2f9">IDIGI_TX_KEEPALIVE_IN_SECONDS</a>  </td>
 <td>TX Keepalive interval in seconds between 5 and 7200 seconds.
 See  <a class="el" href="config__callbacks.html#tx_keepalive">TX Keepalive Interval</a>  </td>
 </tr>
 <tr>
 <td> <a class="el" href="group__idigi__config__data__options.html#gac6fd28bb6adb328198ff1291d727134d">IDIGI_RX_KEEPALIVE_IN_SECONDS</a>  </td>
 <td>RX Keepalive interval in seconds between 5 and 7200 seconds.
 See  <a class="el" href="config__callbacks.html#rx_keepalive">RX Keepalive Interval</a>  </td>
 </tr>
 <tr>
 <td> <a class="el" href="group__idigi__config__data__options.html#ga922f2177c38b261c0d31e5be82202518">IDIGI_WAIT_COUNT</a>  </td>
 <td>Number of time of not receiving a keepalive message which
 a connection should be considered lost.it must be between 2 and 63 times.
 See  <a class="el" href="config__callbacks.html#wait_count">Wait Count</a>  </td>
 </tr>
 <tr>
 <td> <a class="el" href="group__idigi__config__data__options.html#ga4ea48ae34e68af5ebe57be7a34af6b5b">IDIGI_VENDOR_ID</a>  </td>
 <td>Vendor ID from iDigi Account.
 See  <a class="el" href="config__callbacks.html#vendor_id">Vendor ID</a>  </td>
 </tr>
 <tr>
 <td> <a class="el" href="group__idigi__config__data__options.html#ga06c34f05315a4ff63c52dfd5b1c2389d">IDIGI_MSG_MAX_TRANSACTION</a>  </td>
 <td>Maximum simultaneous transactions for data service receiving message.
 See  <a class="el" href="config__callbacks.html#max_msg_transactions">Maximum Message Transactions</a>  </td>
 </tr>
 <tr>
 <td> <a class="el" href="group__idigi__config__data__options.html#ga31c8044a6002c12948d147377f9a33d1">IDIGI_CONNECTION_TYPE</a>  </td>
 <td>  <a class="el" href="group__idigi__connection__type__t.html#ggaa9a55b929d9d20b83bddfae453189b94ab083880eea3d9f4baf90043226ea275e">idigi_lan_connection_type</a>  for LAN connection or
  <a class="el" href="group__idigi__connection__type__t.html#ggaa9a55b929d9d20b83bddfae453189b94a747da7a3b73fe1338868fe446e1adeaa">idigi_wan_connection_type</a>  WAN connection.
 See  <a class="el" href="config__callbacks.html#connection_type">Connection Type</a>  </td>
 </tr>
 <tr>
 <td> <a class="el" href="group__idigi__config__data__options.html#ga8ed061746004e576de7090bdeaa1d3ed">IDIGI_WAN_LINK_SPEED_IN_BITS_PER_SECOND</a>  </td>
 <td>Link speed for WAN connection.
 See  <a class="el" href="config__callbacks.html#link_speed">Link Speed</a>  </td>
 </tr>
 <tr>
 <td> <a class="el" href="group__idigi__config__data__options.html#gab8945fd8920fee10aadff993f07d3860">IDIGI_WAN_PHONE_NUMBER_DIALED</a>  </td>
 <td>Phone number dialed for WAN connection in a string.
 See  <a class="el" href="config__callbacks.html#phone_number">Phone Number</a>  </td>
 </tr>
 <tr>
 <td> <a class="el" href="group__idigi__config__data__options.html#gabb2866812d6f75b61c5abe030722d47b">IDIGI_FIRMWARE_SUPPORT</a>  </td>
 <td>If defined it enables firmware download capability.
 See  <a class="el" href="config__callbacks.html#firmware_support">Firmware Access Support</a>  </td>
 </tr>
 <tr>
 <td> <a class="el" href="group__idigi__config__data__options.html#ga363ade773ebefc762aeb1d3f125c58b6">IDIGI_DATA_SERVICE_SUPPORT</a>  </td>
 <td>If defined it enables data service capability.
 See  <a class="el" href="config__callbacks.html#data_service_support">Data Service Support</a>  </td>
 </tr>
 </table>
 <dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__idigi__config__data__options.html">Hard Code Application Configuration options</a></dd></dl>
<h3><a class="anchor" id="application_start">
iDigi Initialization</a></h3>
<p>As in the previous sample you will need to setup the call to <a class="el" href="group__idigi__init.html#ga10767cc6668eec9bfc426181af798053">idigi_init()</a> where you intend to start the IIK, in this case you will pass in the application callback which handles all OS, network, and configuration routines.</p>
<div class="fragment"><pre class="fragment"> <span class="comment">/* Initialize the IIK with the application callback */</span>
 idigi_handle = <a class="code" href="group__idigi__init.html#ga10767cc6668eec9bfc426181af798053">idigi_init</a>((<a class="code" href="group__idigi__callback__t.html#ga1a64686831c5c6f9c03cf8391fede0a7">idigi_callback_t</a>) idigi_callback);
</pre></div><p>In the Linux platform provided the routine main() creates a thread which then calls <a class="el" href="group__idigi__run.html#gabdea7b2d88546bccfabe22349dcca773" title="Run the IIK, this function does not return and is used in a multithreaded environment...">idigi_run()</a>, you will need to setup a similar thread in your environment or call <a class="el" href="group__idigi__step.html#ga741cb14e2d5f9274e5c8313d3bf7790b" title="Run a portion of the IIK.">idigi_step()</a> periodically. This thread is shown below: </p>
<div class="fragment"><pre class="fragment"> <span class="keyword">static</span> <span class="keywordtype">void</span> * idigi_run_thread(<span class="keywordtype">void</span> * arg)
 {
     <a class="code" href="group__idigi__status__t.html#gafa4546937c115989dd1d558bcdc06dfd">idigi_status_t</a> status;
 
     APP_DEBUG(<span class="stringliteral">&quot;idigi_run thread starts\n&quot;</span>);
 
     <span class="comment">/* Run the IIK, this will only return on an IIK abort */</span>
     status = <a class="code" href="group__idigi__run.html#gabdea7b2d88546bccfabe22349dcca773" title="Run the IIK, this function does not return and is used in a multithreaded environment...">idigi_run</a>((<a class="code" href="group__idigi__handle__t.html#ga67c0491c4011285039100aa356c50582">idigi_handle_t</a>)arg);
 
     APP_DEBUG(<span class="stringliteral">&quot;idigi_run thread exits %d\n&quot;</span>, status);
 
     pthread_exit(arg);
 }
</pre></div><h2><a class="anchor" id="step6">
Step 6: Setup your build environment</a></h2>
<h3><a class="anchor" id="add_c_files">
Add the source files to your build system</a></h3>
<p>To build the connect_to_idigi sample you will need to add the files shown below to your build environment.</p>
 
 <table class="apitable">
 <tr>
 <th class="title">Name</td>
 <th class="title">Description</td>
 <th class="title">Location</td>
 </tr>
 <tr>
 <td>idigi_api.c</td>
 <td>Contains the code for the IIK</td>
 <td>private</td>
 </tr>
 <tr>
 <td>application.c</td>
 <td>Contains the code which runs the sample and main callback that calls
 callbacks in os.c, network.c, & config.c</td>
 <td>public/run/samples/connect_to_idigi</td>
 </tr>
 <tr>
 <td>os.c</td>
 <td>Operating System Routines</td>
 <td>public/run/platforms/<i>my_platform</i></td>
 </tr>
 <tr>
 <td>network.c</td>
 <td>Network Interface</td>
 <td>public/run/platforms/<i>my_platform</i></td>
 </tr>
 <tr>
 <td>config.c</td>
 <td>Configuration Routines</td>
 <td>public/run/platforms/<i>my_platform</i></td>
 </tr>
 <tr>
 <td>main.c (if applicable)</td>
 <td>Program entry point, calls  <a class="el" href="group__idigi__init.html#ga10767cc6668eec9bfc426181af798053">idigi_init()</a>  </td>
 <td>public/run/platforms/<i>my_platform</i></td>
 </tr>
 </table>
 <h3><a class="anchor" id="add_include_paths">
Add the include paths</a></h3>
<p>The following is a list of include paths you will need to add to your build system:</p>
<ul>
<li>public/include </li>
<li>run/platforms/<em>my_platform</em> </li>
</ul>
<h2><a class="anchor" id="step7">
Step 7: Build the connect_to_idigi sample</a></h2>
<p>Next build the sample, if you are running on Linux you can simply type make in the directory public/run/samples/connect_to_idigi, if you are not using Linux then you will have to build for your environment.</p>
<h2><a class="anchor" id="step8">
Step 8: View results</a></h2>
<p>The name of the executable generated by the linux Makefile is called idigi, in linux type ./idigi from a console to execute the program.</p>
<p>By default <a class="el" href="group__idigi__config__options.html#gae0a42315e30656478ca8748a88defed1">IDIGI_DEBUG</a> is defined in <a class="el" href="idigi__config_8h.html" title="IIK configuration options.">idigi_config.h</a>, this will enable the debug output from the program to be displayed as shown below.</p>
<p>Start iDigi</p>
<p>initialize_facilities: callback supports 13 facility</p>
<p>initialize_facilities: callback supports 14 facility</p>
<p>idigi_run thread starts</p>
<p>idigi_run thread starts</p>
<p>application_run thread exits 0</p>
<p>dns_resolve_name: ip address = [50.56.41.153]</p>
<p>network_connect: connected to [developer.idigi.com] server</p>
<p>communication layer: Send MT Version</p>
<p>communication layer: receive Mt version</p>
<p>communication layer: send keepalive params</p>
<p>communication layer: Rx keepalive parameter = 60</p>
<p>communication layer: Tx keepalive parameter = 90</p>
<p>communication layer: Wait Count parameter = 5</p>
<p>initialization layer: send protocol version</p>
<p>initialization layer: receive protocol version</p>
<p>Security layer: send security form</p>
<p>security layer: send device ID = 00 00 00 00 00 00 00 00 78 E7 D1 FF FF 84 47 82</p>
<p>security layer: send server url = developer.idigi.com</p>
<p>discovery layer: send vendor id = 0x1000043</p>
<p>discovery layer: send device type = Linux Application</p>
<p>fw_discovery: No target supported</p>
<p>Connection Control: send redirect_report</p>
<p>get packet buffer: send pending</p>
<p>Connection Control: send redirect_report</p>
<p>Connection Control: send connection report</p>
<p>get_ip_address: Looking for current device IP address: found [2] entries</p>
<p>get_ip_address: 1: Interface name [lo] IP Address [127.0.0.1]</p>
<p>get_ip_address: 2: Interface name [eth1] IP Address [10.52.18.75]</p>
<p>get_ip_addr: Device IP address = 0A 34 12 4B</p>
<p>get_connection_type: connection type = 0</p>
<p>get_mac_addr: MAC address = 78 E7 D1 84 47 82</p>
<p>discovery layer: send complete</p>
<h3><a class="anchor" id="add_your_device_to_the_cloud">
Add your Device to the iDigi Developer Cloud</a></h3>
<p>The next several sections walk through the steps required to add your device to the iDigi Developer Cloud.</p>
<ol type="1">
<li>Navigate to <a href="http://www.idigi.com">http://www.idigi.com</a> and login to the iDigi Developer Cloud</li>
<li>Click on Devices from within the left navigation panel.</li>
<li>Click the Add Devices button (the + button under Devices) to bring up the Add Devices dialog.</li>
</ol>
<div align="center">
<img src="add1.png" alt="add1.png"/>
</div>
<p>Within the Add Devices dialog click the Add Manually&gt;&gt; button.</p>
<div align="center">
<img src="add2.png" alt="add2.png"/>
</div>
<p>Select Device ID: from the drop-down menu.</p>
<div align="center">
<img src="add3.png" alt="add3.png"/>
</div>
<p>Enter the Device ID for your device then click the Add button.</p>
<div align="center">
<img src="add4.png" alt="add4.png"/>
</div>
<p>Click the OK button to add your device to the iDigi Developer Cloud.</p>
<div align="center">
<img src="add5.png" alt="add5.png"/>
</div>
<h3><a class="anchor" id="view_result_on_cloud">
Viewing Results on the iDigi Developer Cloud</a></h3>
<p>Click the Refresh button. The device will reconnect to the iDigi Developer Cloud. If successful your device Status will show connected. You can now communicate with your device over the iDigi cloud, the next step is to integrate in one of the samples to add in more functionality to your application.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>If you cannot connect to the iDigi Device cloud, the most likely problem is in the iDigi Configuration, review the configuration routines in <a class="el" href="config_8c.html" title="Configuration routines for the IIK.">config.c</a>; The device ID and vendor ID must be valid to connect.</dd></dl>
<div align="center">
<img src="results1.png" alt="results1.png"/>
</div>
<h2><a class="anchor" id="step9">
Step 9: Next Steps</a></h2>
<p>Now that you have a basic sample up and running with the iDigi Device Cloud, you can port in more functionality to your application. We first suggest reading the <a class="el" href="api__overview.html#api1_overview">API</a> section of the documentation and then select a sample which has the functionality you need. </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<!--BEGIN GENERATE_TREEVIEW-->
    <li class="footer">$generatedby
    <a href="http://www.idigi.com">
   </ul>
 </div>
<!--END GENERATE_TREEVIEW-->
<!--BEGIN !GENERATE_TREEVIEW-->
<hr class="footer"/><address class="footer">
<center>
<a href="http://www.idigi.com">
</a> Copyright 1996-2011 Digi International Inc. All rights reserved.
</center>
</address>
<!--END !GENERATE_TREEVIEW-->
</body>
</html>
