<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    
    <title>network.c File Reference</title>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
    <link href="customdoxygen.css" rel="stylesheet" type="text/css" />
    
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
    
    <script type="text/javascript" src="utils.js"></script>
  </head>
<body onload="navlink()">
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><a href="index.html"><img alt="Logo" src="logo-idigi.gif"/></a></td>
  
  
  
   
  
  
   
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
   
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">network.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Rountines which implement the IIK network interface.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="idigi__api_8h_source.html">idigi_api.h</a>&quot;</code><br/>
<code>#include &quot;platform.h&quot;</code><br/>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__idigi__callback__status__t.html#gaada37d2b3520ae3522ccf0ed368f458d">idigi_callback_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="network_8c.html#a9dc69781c58510962d0bbca3aef8cd86">app_network_connect</a> (char const *const host_name, size_t const length, <a class="el" href="group__idigi__network__handle__t.html#ga56cc37674d1d16993665a185cbb3d6ac">idigi_network_handle_t</a> **network_handle)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect to the iDigi server.  <a href="#a9dc69781c58510962d0bbca3aef8cd86"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__idigi__callback__status__t.html#gaada37d2b3520ae3522ccf0ed368f458d">idigi_callback_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="network_8c.html#a03322df02ba77acec61357658cb02178">app_network_send</a> (<a class="el" href="structidigi__write__request__t.html">idigi_write_request_t</a> const *const write_data, size_t *sent_length)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send data to the iDigi server.  <a href="#a03322df02ba77acec61357658cb02178"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__idigi__callback__status__t.html#gaada37d2b3520ae3522ccf0ed368f458d">idigi_callback_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="network_8c.html#a8701f9056628d15ef7af3902b9516443">app_network_receive</a> (<a class="el" href="structidigi__read__request__t.html">idigi_read_request_t</a> *read_data, size_t *read_length)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive data from the iDigi server.  <a href="#a8701f9056628d15ef7af3902b9516443"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__idigi__callback__status__t.html#gaada37d2b3520ae3522ccf0ed368f458d">idigi_callback_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="network_8c.html#aaae5942657b1cd15f43d223de127ceb7">app_network_close</a> (<a class="el" href="group__idigi__network__handle__t.html#ga56cc37674d1d16993665a185cbb3d6ac">idigi_network_handle_t</a> *const fd)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the connection to the iDigi server.  <a href="#aaae5942657b1cd15f43d223de127ceb7"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Rountines which implement the IIK network interface. </p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a9dc69781c58510962d0bbca3aef8cd86"></a><!-- doxytag: member="network.c::app_network_connect" ref="a9dc69781c58510962d0bbca3aef8cd86" args="(char const *const host_name, size_t const length, idigi_network_handle_t **network_handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__idigi__callback__status__t.html#gaada37d2b3520ae3522ccf0ed368f458d">idigi_callback_status_t</a> <a class="el" href="network_8c.html#a9dc69781c58510962d0bbca3aef8cd86">app_network_connect</a> </td>
          <td>(</td>
          <td class="paramtype">char const *const&#160;</td>
          <td class="paramname"><em>host_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t const&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__idigi__network__handle__t.html#ga56cc37674d1d16993665a185cbb3d6ac">idigi_network_handle_t</a> **&#160;</td>
          <td class="paramname"><em>network_handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Connect to the iDigi server. </p>
<p>This routine sets up a connection to the iDigi Device Cloud specified in the host_name and fills in a network handle which is then passed to subsequent networking calls. This routine will take the given hostname and attempt to resolve the name, connect and wait for the connection to complete. The example given waits one second for the connection to complete, if the connection does not complete idigi_callback_busy is returned and the network_connect routine is called again. If the connection was successful then idigi_callback_continue is returned.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">host_name</td><td>FQDN of iDigi host to connect to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Number of bytes in the hostname </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">network_handle</td><td>This is filled in with the value of a handle which is passed to subsequent networking calls. The idigi_network_handle_t is defined in public\include\idigi_types.h.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">idigi_callback_status_t</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="network_callbacks.html#connect">Connect</a> API Network Callback </dd></dl>

</div>
</div>
<a class="anchor" id="a03322df02ba77acec61357658cb02178"></a><!-- doxytag: member="network.c::app_network_send" ref="a03322df02ba77acec61357658cb02178" args="(idigi_write_request_t const *const write_data, size_t *sent_length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__idigi__callback__status__t.html#gaada37d2b3520ae3522ccf0ed368f458d">idigi_callback_status_t</a> <a class="el" href="network_8c.html#a03322df02ba77acec61357658cb02178">app_network_send</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structidigi__write__request__t.html">idigi_write_request_t</a> const *const&#160;</td>
          <td class="paramname"><em>write_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>sent_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send data to the iDigi server. </p>
<p>This routine sends data to the iDigi Device Cloud. This function must not block. If it encounters EAGAIN or EWOULDBLOCK error, 0 bytes must be returned and the IIK will continue calling this function. If successful idigi_callback_continue is returned. If the data could not be sent idigi_callback_busy is returned, otherwise idigi_callback_abort is returned.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">write_data</td><td>Pointer to a <a class="el" href="structidigi__write__request__t.html">idigi_write_request_t</a> structure </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">sent_length</td><td>Filled in with the number of bytes sent.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">idigi_callback_status_t</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="network_callbacks.html#send">Send</a> API Network Callback </dd></dl>

</div>
</div>
<a class="anchor" id="a8701f9056628d15ef7af3902b9516443"></a><!-- doxytag: member="network.c::app_network_receive" ref="a8701f9056628d15ef7af3902b9516443" args="(idigi_read_request_t *read_data, size_t *read_length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__idigi__callback__status__t.html#gaada37d2b3520ae3522ccf0ed368f458d">idigi_callback_status_t</a> <a class="el" href="network_8c.html#a8701f9056628d15ef7af3902b9516443">app_network_receive</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structidigi__read__request__t.html">idigi_read_request_t</a> *&#160;</td>
          <td class="paramname"><em>read_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>read_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Receive data from the iDigi server. </p>
<p>This routine reads a specified number of bytes from the iDigi Device Cloud. This function blocks up to the timeout value specified. If no data is received and the timeout has expired 0 bytes must be returned and IIK will continue calling this function.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">read_data</td><td>Pointer to a <a class="el" href="structidigi__read__request__t.html">idigi_read_request_t</a> structure </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">read_length</td><td>Filled in with the number of bytes received.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">idigi_callback_status_t</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>When running in a multithreaded model this is where the IIK will relinquish control, the user should sleep until data is received up to the timeout given.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="network_callbacks.html#receive">Receive</a> API Network Callback </dd></dl>

</div>
</div>
<a class="anchor" id="aaae5942657b1cd15f43d223de127ceb7"></a><!-- doxytag: member="network.c::app_network_close" ref="aaae5942657b1cd15f43d223de127ceb7" args="(idigi_network_handle_t *const fd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__idigi__callback__status__t.html#gaada37d2b3520ae3522ccf0ed368f458d">idigi_callback_status_t</a> <a class="el" href="network_8c.html#aaae5942657b1cd15f43d223de127ceb7">app_network_close</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__idigi__network__handle__t.html#ga56cc37674d1d16993665a185cbb3d6ac">idigi_network_handle_t</a> *const&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Close the connection to the iDigi server. </p>
<p>This routine closes the connection to the iDigi Device Cloud</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>Pointer to a <a class="el" href="structidigi__read__request__t.html">idigi_read_request_t</a> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">idigi_callback_status_t</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="network_callbacks.html#close">Close</a> API Network Callback </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer">
<center>
<a href="http://www.idigi.com">
</a> Copyright 1996-2011 Digi International Inc. All rights reserved.
</center>
</address>

</body>
</html>
